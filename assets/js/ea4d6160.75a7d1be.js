"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[766],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>h});var r=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=r.createContext({}),p=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},s=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,i=e.mdxType,n=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),d=p(a),u=i,h=d["".concat(l,".").concat(u)]||d[u]||m[u]||n;return a?r.createElement(h,o(o({ref:t},s),{},{components:a})):r.createElement(h,o({ref:t},s))}));function h(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=a.length,o=new Array(n);o[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c[d]="string"==typeof e?e:i,o[1]=c;for(var p=2;p<n;p++)o[p]=a[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},2089:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>n,metadata:()=>c,toc:()=>p});var r=a(7462),i=(a(7294),a(3905));const n={sidebar_position:6,sidebar_label:"Template",title:"Template"},o=void 0,c={unversionedId:"reference/mqtt-template",id:"reference/mqtt-template",title:"Template",description:"A template is created to serve three main purposes.",source:"@site/docs/reference/mqtt-template.md",sourceDirName:"reference",slug:"/reference/mqtt-template",permalink:"/reference/mqtt-template",draft:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,sidebar_label:"Template",title:"Template"},sidebar:"tutorialSidebar",previous:{title:"Custom Data Hub",permalink:"/reference/custom-datahub"},next:{title:"Certificate Authority",permalink:"/reference/certificate-authority"}},l={},p=[{value:"1. To Link the Data Hub to a Device",id:"1-to-link-the-data-hub-to-a-device",level:3},{value:"2. To Update Certificate Template",id:"2-to-update-certificate-template",level:3},{value:"3. To Select Device Properties",id:"3-to-select-device-properties",level:3},{value:"Manage Templates",id:"manage-templates",level:3},{value:"1. Wildcard character <code>*</code>",id:"1-wildcard-character-",level:4},{value:"2. Remove MQTT Template",id:"2-remove-mqtt-template",level:4}],s={toc:p},d="wrapper";function m(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"A template is created to serve three main purposes."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"To link the Data Hub to a device."),(0,i.kt)("li",{parentName:"ol"},"To update certificate template configurations, specifically for MQTT or OPC UA application certificates.  "),(0,i.kt)("li",{parentName:"ol"},"To select device properties.")),(0,i.kt)("p",null,"The device has the option to use either MQTT or OPC UA as its communication protocol. Depending on whether the device requires configuration to connect to an MQTT broker or act as an OPC UA server, a corresponding template - an MQTT template or an OPC UA template - needs to be created. "),(0,i.kt)("h3",{id:"1-to-link-the-data-hub-to-a-device"},"1. To Link the Data Hub to a Device"),(0,i.kt)("p",null,"A ",(0,i.kt)("a",{parentName:"p",href:"/reference/data-hub"},"Data Hub")," defines the configuration requirements for the devices' MQTT Client to connect to its designated MQTT broker. Beyond just MQTT details, the Data Hub also outlines CA and Trust Anchor information. When an ",(0,i.kt)("strong",{parentName:"p"},"MQTT Template")," associates a Data Hub with a Device, all MQTT settings, CA, and Trust Anchor specifics are applied to configure the device."),(0,i.kt)("p",null,"The CA and Trust Anchor-related specifications are updated directly while creating an ",(0,i.kt)("strong",{parentName:"p"},"OPC UA Template"),". The device is configured using this template information to connect to the OPC UA server securely."),(0,i.kt)("h3",{id:"2-to-update-certificate-template"},"2. To Update Certificate Template"),(0,i.kt)("p",null,"When creating a template, you can define application certificate settings for issuing MQTT or OPC UA certificates. This setup lets you specify the security level required for device applications when communicating with external systems. For example, you can ensure a higher level of security by selecting robust key and signature algorithms for the certificate."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"KEYNOA",src:a(8404).Z,width:"1845",height:"1011"})),(0,i.kt)("h3",{id:"3-to-select-device-properties"},"3. To Select Device Properties"),(0,i.kt)("p",null,"Device properties can be used to group the device(s) having matching properties. The template then links this group of devices to either the Data Hub or particular configurations."),(0,i.kt)("p",null,"The template consists of multiple selectors to define the device properties, such as Device Serial Number, GUID, Device Model, etc. These selectors will be matched against the information the device provides about itself during the onboarding process. If all properties match the specified selectors, the template links the device to its corresponding information: the Data Hub (for MQTT settings), CA, and Trust Anchor specifics."),(0,i.kt)("admonition",{title:"Example",type:"note"},(0,i.kt)("p",{parentName:"admonition"},"As an ",(0,i.kt)("em",{parentName:"p"},"example"),", we assume that we want the Eval Kit device to connect to Azure IoT Central."),(0,i.kt)("p",{parentName:"admonition"},"For this, we connect devices whose model type is ",(0,i.kt)("inlineCode",{parentName:"p"},"sy-epc-rpi30")," (the device model of the Eval Kit).\nTo specify this in KEYNOA, we create an MQTT template and select the Data Hub, which is linked to our Azure IoT Central.\nThen, we select ",(0,i.kt)("inlineCode",{parentName:"p"},"Device Model")," as a selector property and input ",(0,i.kt)("inlineCode",{parentName:"p"},"sy-epc-rpi30")," in the box to the right.")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"mqtt-template-example",src:a(2290).Z,width:"1051",height:"381"})),(0,i.kt)("h3",{id:"manage-templates"},"Manage Templates"),(0,i.kt)("h4",{id:"1-wildcard-character-"},"1. Wildcard character ",(0,i.kt)("inlineCode",{parentName:"h4"},"*")),(0,i.kt)("p",null,"If we want all device models to connect to a Data Hub, we can use the wildcard symbol ",(0,i.kt)("inlineCode",{parentName:"p"},"*"),".\nHence, we set the device property ",(0,i.kt)("inlineCode",{parentName:"p"},"Device Model")," to be ",(0,i.kt)("inlineCode",{parentName:"p"},"*")," and the selected Data Hub will be applied to all our devices."),(0,i.kt)("p",null,"To match devices in a group of device models, we can also define ",(0,i.kt)("inlineCode",{parentName:"p"},"sy-epc-rpi*"),".\nHere, we replaced 30 with the wildcard character ",(0,i.kt)("inlineCode",{parentName:"p"},"*"),".\nThis would match not only the current Raspberry Pi 3-based Eval Kit, but also the new Raspberry Pi 4 devices."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"remove-mqtt-template",src:a(6521).Z,width:"1785",height:"456"})),(0,i.kt)("h4",{id:"2-remove-mqtt-template"},"2. Remove MQTT Template"),(0,i.kt)("p",null,'You can delete a template by clicking the burger menu in the right of the template\'s row and select ("Delete").'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"remove-mqtt-template",src:a(725).Z,width:"1785",height:"456"})))}m.isMDXComponent=!0},725:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/MQTT-template-delete-5a24ef3a8aeb66f742c0788bef573a14.png"},6521:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/MQTT-template-device-model-d25c024b135b1908ad5a2b32e57465b1.png"},8404:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/MQTT2PolicyConfigurations-bc365100948653286582d6ce67f8592d.png"},2290:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/mqtt-template-concept-0f9c8e3fe1cccbec10bc1105bb0d14a2.png"}}]);