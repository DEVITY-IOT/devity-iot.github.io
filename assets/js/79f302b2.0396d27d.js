"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[988],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=s(a),m=r,h=u["".concat(p,".").concat(m)]||u[m]||d[m]||i;return a?n.createElement(h,o(o({ref:t},c),{},{components:a})):n.createElement(h,o({ref:t},c))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[u]="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},1593:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var n=a(7462),r=(a(7294),a(3905));const i={sidebar_position:2},o="KEYNOA Setup",l={unversionedId:"tutorial/AWS/KEYNOA",id:"tutorial/AWS/KEYNOA",title:"KEYNOA Setup",description:"In this step you will start by configurating the KEYNOA such that your device will be onboarded to your Thingsboard account.",source:"@site/docs/tutorial/AWS/KEYNOA.md",sourceDirName:"tutorial/AWS",slug:"/tutorial/AWS/KEYNOA",permalink:"/tutorial/AWS/KEYNOA",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"About AWS IoT",permalink:"/tutorial/AWS/prerequsites"},next:{title:"AWS Setup",permalink:"/tutorial/AWS/SiteWise"}},p={},s=[{value:"Before you start",id:"before-you-start",level:2},{value:"Create Data Hub",id:"create-data-hub",level:2},{value:"Create Template",id:"create-template",level:2}],c={toc:s},u="wrapper";function d(e){let{components:t,...i}=e;return(0,r.kt)(u,(0,n.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"keynoa-setup"},"KEYNOA Setup"),(0,r.kt)("p",null,"In this step you will start by configurating the KEYNOA such that your device will be onboarded to your Thingsboard account."),(0,r.kt)("h2",{id:"before-you-start"},"Before you start"),(0,r.kt)("p",null,"Before you start, make sure that you fulfill all ",(0,r.kt)("a",{parentName:"p",href:"/tutorial/Prerequsites"},"prerequisites"),"."),(0,r.kt)("p",null,"If you already used the device before make sure to ",(0,r.kt)("a",{parentName:"p",href:"/reference/reset-device"},"reset the device")," and ",(0,r.kt)("a",{parentName:"p",href:"/reference/mqtt-template#remove-mqtt-template"},"remove any MQTT templates")," from the list."),(0,r.kt)("p",null,"In the following steps the device configuration is applied to KEYNOA and not to the device.\nHence, the ",(0,r.kt)("strong",{parentName:"p"},"device is powered off")," until KEYNOA is ready.\nThe device will be turned on in the end of this guide."),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"For a specific application like MQTT only a single template can be applied.\nIf multiple MQTT Templates exist the newer template will be ignored. Hence your new template referring to a new data hub will not be used because another template is already applied.")),(0,r.kt)("h2",{id:"create-data-hub"},"Create Data Hub"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In the KEYNOA UI create the Data Hub you want your device to connect to.\n",(0,r.kt)("img",{alt:"KEYNOA",src:a(9532).Z,width:"1845",height:"1009"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Select the AWS data hub.\n",(0,r.kt)("img",{alt:"KEYNOA",src:a(9723).Z,width:"1920",height:"1084"}),"\n")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Fill in the details and click on "Confirm".'))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Access Key ID: copy from KEYNOA Credential Manager"),(0,r.kt)("li",{parentName:"ul"},"Access Secret Key: copy from KEYNOA Credential Manager"),(0,r.kt)("li",{parentName:"ul"},"Region: select ",(0,r.kt)("inlineCode",{parentName:"li"},"eu-central-1")," from the dropdown")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"KEYNOA",src:a(3538).Z,width:"1918",height:"1089"})),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},'Fill in the details and click on "Register CA".')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Template Body: ",(0,r.kt)("inlineCode",{parentName:"li"},"default")),(0,r.kt)("li",{parentName:"ul"},"RoleARN: copy from KEYNOA Credential Manager"),(0,r.kt)("li",{parentName:"ul"},"Topic: ",(0,r.kt)("inlineCode",{parentName:"li"},"/company/facility/42/dty-eval-kit/$(serial)")),(0,r.kt)("li",{parentName:"ul"},"Certificate Authority: select ",(0,r.kt)("inlineCode",{parentName:"li"},"KEYNOA-CLOUD INT CA2 MQTT v1")," from the dropdown"),(0,r.kt)("li",{parentName:"ul"},"Connector Name: ",(0,r.kt)("inlineCode",{parentName:"li"},"AWS connector"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"KEYNOA",src:a(1692).Z,width:"1920",height:"1090"})),(0,r.kt)("h2",{id:"create-template"},"Create Template"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"If you have not uploaded your voucher yet and therefore the list of all devices is empty, then ",(0,r.kt)("a",{parentName:"p",href:"/tutorial/Prerequsites#upload-voucher"},"upload the voucher"),".")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},'If there are already MQTT templates, make sure they do not match your device. If you are unsure how to do this, you can also remove them:\nYou can delete a template by clicking the burger menu in the right of the template\'s row and select ("Delete").')),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In the KEYNOA UI create the MQTT Template.\n",(0,r.kt)("img",{alt:"KEYNOA",src:a(9532).Z,width:"1845",height:"1009"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Select your Data Hub. Click on "Next".\n',(0,r.kt)("img",{alt:"KEYNOA",src:a(613).Z,width:"1849",height:"1071"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Fill in the device details. Click on "Next".'))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Device Property: ",(0,r.kt)("inlineCode",{parentName:"li"},"Device Model")),(0,r.kt)("li",{parentName:"ul"},"your-device-model-number: ",(0,r.kt)("inlineCode",{parentName:"li"},"sy-epc-rpi30"))),(0,r.kt)("p",null,"These properties will be matched against the information which the device provides about itself during the onboarding process. If it matches the template, the template will be used to configure the device."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"For more information about the template concept see the ",(0,r.kt)("a",{parentName:"p",href:"/reference/mqtt-template"},"MQTT Templates Section"))),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},'Click on "Next".\n',(0,r.kt)("img",{alt:"KEYNOA",src:a(9673).Z,width:"1848",height:"1004"}))),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},'Give the template an identifier and click on "Save".')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Identifier Name: ",(0,r.kt)("inlineCode",{parentName:"li"},"AWS MQTT template"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"KEYNOA",src:a(1596).Z,width:"1919",height:"1089"})),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},"You have now created the setup instruction for your device to be onboarded.\nKEYNOA and IoT Central are now fully configured and your device is now ready to be onboarded.")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Power up your device and connect it to the internet via an ethernet cable.")),(0,r.kt)("ol",{start:7},(0,r.kt)("li",{parentName:"ol"},"Wait until your device status in KEYNOA switches to ",(0,r.kt)("strong",{parentName:"li"},"provisioned")," by pressing the little refresh button in the top right.\nAfter a successful onboarding, the device status in KEYNOA switches to ",(0,r.kt)("strong",{parentName:"li"},"provisioned"),".",(0,r.kt)("admonition",{parentName:"li",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The onboarding including the boot process should not take longer than 2 minutes.")))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"KEYNOA",src:a(3508).Z,width:"3835",height:"1954"})),(0,r.kt)("p",null,"The voucher enables KEYNOA to connect securely to the device and therefor to provision your device automatically."),(0,r.kt)("ol",{start:8},(0,r.kt)("li",{parentName:"ol"},"Your device is now provisioned to AWs IoT Core. Continue with the setup of IoT Central.")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Checkout the Things section of your AWS IoT Core to see the new device.")))}d.isMDXComponent=!0},1692:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Data-Hub-details-2-f9180e3922ee08d6288a97fa17030391.png"},3538:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Data-Hub-details-1b0bf94dc676edb8bdb5c6b59225aaa4.png"},9723:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Data-Hub-e75e29fbab8ea898942634d9a87c84f4.png"},613:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/MQTT-template-1-89754b64f80cfd176d4a6c1a24861402.png"},9532:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Dashboard-b10b0069157a446d18bc3a516dfa9372.png"},9673:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/MQTT-template-2-b01a0b077ec4c77dcfb2d2b5aaf9c82b.png"},1596:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/MQTT-template-3-3e7221d572c00260a55be5d1f9a4afa3.png"},3508:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/devices_list_refresh-f52ee84123e2670c73e42d1713bff51c.png"}}]);